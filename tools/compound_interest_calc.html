<!DOCTYPE html><html><head>    <title>复利计算</title>    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">    <style>        table {            border-collapse: collapse;            text-align: left;        }        table th {            background: #CCC;        }        table td,        table th {            border: 1px solid #000000;            padding: 2px 5px 2px 5px;        }    </style></head><body><b>复利计算</b><div>    计算期数:<input type="text" id="field_period" name="periods" value="24"></div><div>    初始本金:<input type="text" id="field_start_principal" name="start_principal" value="0"></div><div>    每期增资:<input type="text" id="field_period_add" name="period_add" value="1000"></div><div>    每期利率:<input type="text" id="field_rate" name="rate" value="0.05">    <input type="button" value="*12" onclick="multiple12()">    <input type="button" value="/12" onclick="divide12()"></div><div>    复利结果:    <button type="button" onclick="calc()">计算</button>    <br>    <span id="last_principal"></span></div><div>    <table id="result">    </table></div></body></html><script>    function loadParameter() {        try {            let hash = document.location.hash;            if (hash.length > 0) {                hash = hash.substr(1)                let parameters = hash.split("&")                for (let i = 0; i < parameters.length; i++) {                    let kv = parameters[i].split("=")                    nd("field_" + kv[0]).value = kv[1]                }            }        } catch (e) {            console.log(e)        }    }    function fixedFloat(amt) {        return parseFloat(Number(amt).toFixed(2))    }    function nd(name) {        return document.getElementById(name)    }    function multiple12() {        let val = nd("field_rate").value;        nd("field_rate").value = parseFloat(Number(val * 12).toFixed(8));    }    function divide12() {        let val = nd("field_rate").value;        nd("field_rate").value = parseFloat(Number(val / 12).toFixed(8));    }    function calc() {        let periods = parseInt(nd("field_period").value);        let start_principal = parseFloat(nd("field_start_principal").value);        let period_add = parseFloat(nd("field_period_add").value);        let rate = parseFloat(nd("field_rate").value);        document.location.hash = "#period=" + periods            + "&start_principal=" + start_principal            + "&period_add=" + period_add            + "&rate=" + rate;        let previous_principal = 0;        if (start_principal > 0) {            previous_principal = start_principal - period_add;        }        let table = nd("result")        table.innerHTML = "<tr><th>期数</th>" +            "<th>初始本金</th>" +            "<th>新增本金</th>" +            "<th>总本金</th>" +            "<th>利率</th>" +            "<th>利息</th>" +            "<th>本息和</th></tr>";        for (let i = 1; i <= periods; i++) {            let principal = fixedFloat(previous_principal + period_add);            let interest = fixedFloat(principal * rate);            let new_principal = fixedFloat(principal + interest);            table.innerHTML += "<tr><td>" + i + "期</td>" +                "<td>" + previous_principal + "</td>" +                "<td>" + period_add + "</td>" +                "<td>" + principal + "</td>" +                "<td>" + rate + "</td>" +                "<td>" + interest + "</td>" +                "<td>" + new_principal + "</td></tr>"            previous_principal = new_principal        }        let last = previous_principal;        let total_add = fixedFloat(periods * period_add + start_principal);        let yieldRate = fixedFloat(((last - total_add) * 100) / total_add);        nd("last_principal").innerHTML = "投入本金总计:" + total_add            + ", 最终本息:" + last            + ", 长期收益率:" + yieldRate + "%";        document.title = "复利计算 - 利率(" + rate + ") 期数(" + periods + ") 收益率(" + yieldRate + "%)"    }    loadParameter()    calc()</script>